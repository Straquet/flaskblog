{% extends 'layout.html' %}
{% block content %}
<div class="content-section">
    <div class="media">
        <img class="rounded-circle account-img" src="{{ image_file }}">
        <div class="media-body">
            <h2 class="account-heading">{{ current_user.username }}</h2>
            <p class="text-secondary">{{ current_user.email }}</p>
        </div>
    </div>
    <form method="POST" action="" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        <fieldset class="form-group">
            <legend class="border-bottom mb-4">Informaci√≥n de la Cuenta</legend>
            <div class="form-group">
                {{ form.username.label(class="form-control-label") }}

                {% if form.username.errors %}
                {{ form.username(class="form-control form-control-lg is-invalid") }}
                <div class="invalid-feedback">
                    {% for error in form.username.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                {{ form.username(class="form-control form-control-lg") }}
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.email.label(class="form-control-label") }}
                {% if form.email.errors %}
                {{ form.email(class="form-control form-control-lg is-invalid") }}
                <div class="invalid-feedback">
                    {% for error in form.email.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                {{ form.email(class="form-control form-control-lg") }}
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.picture.label() }}
                {{ form.picture(class="form-control-file") }}
                {% if form.picture.errors %}
                {% for error in form.picture.errors %}
                <span class="text-danger">{{ error }}</span></br>
                {% endfor %}
                {% endif %}
            </div>
        </fieldset>
        <div class="form-group">
            {{ form.submit(class="btn btn-outline-info") }}
        </div>
    </form>
    {% for post in posts %}
    <article class="media content-section border-info bg-secondary">
        <div class="media-body">
            <div class="card border-primary">
                <div class="article-metadata mt-1 ml-1 border-primary">
                    <img class="rounded-circle article-img"
                        src="{{ url_for('static', filename='profile_pics/' + post.author.image_file)}}" alt="">
                    <a class="mr-2" href="{{ url_for('users.user_posts', username=post.author.username)}}">{{
                        post.author.username
                        }}</a>
                    <small class="text-muted">{{ post.date_posted.strftime('%Y-%m-%d') }}</small>
                </div>
                <div class="card-body">
                    <h3 class="card-title"><a class="article-title">{{ post.title }}</a></h3>
                    <div id="carouselExampleFade" class="carousel slide carousel-fade mb-4" data-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{ url_for('static', filename='casa/' + post.image_casa)}}"
                                    class="d-block w-100" alt="..." width="400" height="400">
                            </div>
                            <div class="carousel-item">
                                <img src="{{ url_for('static', filename='casa2/' + post.image_casa2)}}"
                                    class="d-block w-100" alt="..." width="400" height="400">
                            </div>
                            <div class="carousel-item">
                                <img src="{{ url_for('static', filename='casa3/' + post.image_casa3)}}"
                                    class="d-block w-100" alt="..." width="400" height="400">
                            </div>
                            <div class="carousel-item">
                                <img src="{{ url_for('static', filename='casa4/' + post.image_casa4)}}"
                                    class="d-block w-100" alt="..." width="400" height="400">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <label class="font-weight-bolder card-text">
                        Precio $: <label class="article-content card-text font-weight-normal"> {{ post.precio }}</label>
                    </label><br>
                    <label class="font-weight-bolder card-text">
                        Esta en: <label class="article-content card-text font-weight-normal">{{ post.poner }} </label>
                    </label><br>
                    <label class="font-weight-bolder card-text">
                        Descripcion: <label class="article-content card-text font-weight-normal"> {{ post.descripcion
                            }}</label>
                    </label>
                    <div class="text-right">
                        <a href="{{ url_for('posts.post', post_id=post.id)}}" class="btn btn-primary">Ver</a>
                    </div>
                </div>
            </div>
        </div>
    </article>
    {% endfor %}
</div>

{% endblock content%}